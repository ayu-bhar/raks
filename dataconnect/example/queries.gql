mutation CreateUser($displayName: String!, $email: String!, $studentId: String!) @auth(level: USER) {
  user_insert(data: {displayName: $displayName, email: $email, studentId: $studentId, createdAt_expr: "request.time", id_expr: "uuidV4()" })
}

query GetUser @auth(level: USER) {
  user(key: {id_expr: "auth.uid"}) {
    id
    displayName
    email
    studentId
    major
    yearLevel
    photoUrl
    createdAt
  }
}

mutation UpdateUser($displayName: String, $email: String, $major: String, $photoUrl: String, $yearLevel: String) @auth(level: USER) {
  user_update(key: {id_expr: "auth.uid"}, data: {displayName: $displayName, email: $email, major: $major, photoUrl: $photoUrl, yearLevel: $yearLevel})
}

query ListCourses @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  courses {
    id
    courseCode
    title
    description
    department
    credits
    createdAt
  }
}